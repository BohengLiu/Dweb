# 区块链学习
想深入研究一个领域，最好的方式是将这个领域解构成一个个子系统，待将子系统都研究透以后再串起来，研究区块链也是这个思路。

首先，先明确研究的对象。区块链是什么，由哪些部分组成？理论基础有哪些？目前我大概有了基本的概念，但区块链设计的领域太多，所以只能先从一个小部分开始解析起来。

区块链的技术基础分为三部分：
1. P2P网络　　
2. 加密机制
3. 去中心化的经济学理论

系统机制相关的是它的共识机制。

## 区块链
区块链就是区块组成的链表,每个区块核心的内容是上个区块的哈希, 时间戳, 本区块数据, 本区块的哈希. 本区块的哈希是由上个区块的哈希, 时间戳, 本区块数据通过sha256哈希得到. 所以只有拥有创世块的数据就能验证区块链的有效性. 

## P2P网络
之前的一个疑问是初始化的节点如何连接到网络之中，今天看知乎一个回答是有些域名已经写死到程序里了。其实只有第一次连接用到这些，之后就可以获得全网上其他节点的定位。不过我在想，如果有天政府封锁比特币，新用户入网是不是就比较困难，如果是利用DHT网络是不是相对就安全些。

## 钱包
钱包所储存的并不是钱币而是大量密钥对. 
有两种主要类型的钱包，区别在于它们包含的多个密钥是否相互关联。

第一种类型是非确定性钱包（nondeterministic wallet），其中每个密钥都是从随机数独立生成的。密钥彼此无关。这种钱包也被称为“Just a Bunch Of Keys（一堆密钥）”，简称JBOK钱包。

第二种类型是确定性钱包（deterministic wallet），其中所有的密钥都是从一个主密钥派生出来，这个主密钥即为种子（seed）。该类型钱包中所有密钥都相互关联，如果有原始种子，则可以再次生成全部密钥。确定性钱包中使用了许多不同的密钥推导方法。最常用的推导方法是使用树状结构，称为分级确定性钱包或HD钱包。
### 非确定性钱包
钱包只是随机生成的私钥集合。这种类型的钱包被称作零型非确定钱包。举个例子，比 特币核心客户端预先生成100个随机私钥，从最开始就生成足够多的私钥并且每个密钥只使用一次。这种钱包现在正在被确定性钱包替换，因为它们难以管理、 备份以及导入。随机密钥的缺点就是如果你生成很多私钥，你必须保存它们所有的副本。这就意味着这个钱包必须被经常性 地备份。每一个密钥都必须备份，否则一旦钱包不可访问时，钱包所控制的资金就付之东流。这种情况直接与避免地址重复使用的原则相冲突——每个比特币地址只能用一次交易。
### 确定性钱包
确定性钱包被开发成更容易从单个“种子”中生成许多密钥。确定性钱包的最高级形式是通过BIP0032标准定义的HD钱包。HD钱包包含以树状结构衍生的密钥，使得父密钥可以衍生一系列子密钥，每个子密钥又可以衍生出一系列孙密钥，以此类推，无限衍生。

相比较随机（不确定性）密钥，HD钱包有两个主要的优势。第一，树状结构可以被用来表达额外的组织含义。比如当一个特定分支的子密钥被用来接收交易收入并且有另一个分支的子密钥用来负责支付花费。不同分支的密钥都可以被用在企业环境中，这就可以支配不同的分支部门、子公司、具体功能以及会计类别。

HD钱包的第二个好处就是它可以允许让使用者去建立一个公共密钥的序列而不需要访问相对应的私钥。这可允许HD钱包在不安全的服务器中使用或者在每笔交易中发行不同的公共钥匙。公共钥匙不需要被预先加载或者提前衍生，而在服务器中不需要可用来支付的私钥。

## 智能合约


